"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4987],{4987:(S,f,a)=>{a.r(f),a.d(f,{LoginPageModule:()=>d});var p=a(6895),l=a(433),o=a(5035),b=a(4126),u=a(655),e=a(8256),h=a(1053),v=a(849),y=a(4512),x=a(7330);function _(i,r){1&i&&(e.TgZ(0,"p",23)(1,"ion-text",24),e._uU(2," * Email requis. "),e.qZA()())}function w(i,r){1&i&&(e.TgZ(0,"p",25)(1,"ion-text",24),e._uU(2," * Mot de passe requis. "),e.qZA()())}function P(i,r){1&i&&(e.TgZ(0,"b"),e._uU(1," Non "),e.qZA())}function O(i,r){1&i&&(e.TgZ(0,"b"),e._uU(1," Oui "),e.qZA())}function Z(i,r){if(1&i&&(e.TgZ(0,"ion-badge",30),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.nb_free,"/",t.nb_places," place(s) ")}}function C(i,r){if(1&i&&(e.TgZ(0,"ion-badge",31),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" Complet ",t.nb_free,"/",t.nb_places," ")}}const m=function(){return["/register"]};function L(i,r){if(1&i&&(e.TgZ(0,"ion-item",26)(1,"ion-label")(2,"ion-text")(3,"h2")(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"small"),e._uU(7),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"small"),e._uU(10),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"small"),e._uU(13," Autorisation_parentale : "),e.YNc(14,P,2,0,"b",27),e.YNc(15,O,2,0,"b",27),e._uU(16),e.qZA(),e._UZ(17,"br"),e.YNc(18,Z,2,2,"ion-badge",28),e.YNc(19,C,2,2,"ion-badge",29),e.qZA()()()),2&i){const t=r.$implicit;e.Q6J("routerLink",e.DdM(10,m)),e.xp6(5),e.Oqu(t.title),e.xp6(2),e.hij(" ",t.content," "),e.xp6(3),e.AsE(" Age mini : ",t.age_min," ans - Age max : ",t.age_max," ans"),e.xp6(4),e.Q6J("ngIf",0==t.autorisation_parentale),e.xp6(1),e.Q6J("ngIf",1==t.autorisation_parentale),e.xp6(1),e.hij(" - avec ",t.intervenant,""),e.xp6(2),e.Q6J("ngIf",t.nb_free>0),e.xp6(1),e.Q6J("ngIf",0==t.nb_free)}}const j=function(){return["/forgotpassword"]};class g{constructor(r,t,n,c,T,M,U,I,J,k,Y,q){Object.defineProperty(this,"navCtrl",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"menu",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"toastCtrl",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"alertCtrl",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"LoadingController",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"formBuilder",{enumerable:!0,configurable:!0,writable:!0,value:M}),Object.defineProperty(this,"redditService",{enumerable:!0,configurable:!0,writable:!0,value:U}),Object.defineProperty(this,"router",{enumerable:!0,configurable:!0,writable:!0,value:I}),Object.defineProperty(this,"alertController",{enumerable:!0,configurable:!0,writable:!0,value:J}),Object.defineProperty(this,"storage",{enumerable:!0,configurable:!0,writable:!0,value:k}),Object.defineProperty(this,"authService",{enumerable:!0,configurable:!0,writable:!0,value:Y}),Object.defineProperty(this,"localStore",{enumerable:!0,configurable:!0,writable:!0,value:q}),Object.defineProperty(this,"email",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"token",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onLoginForm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"roleUser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"per_page",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order_by",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"products",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ionViewWillEnter(){this.menu.enable(!1)}ngOnInit(){this.email=this.localStore.getItem("email"),this.password=this.localStore.getItem("password"),this.onLoginForm=this.formBuilder.group({email:[null,l.kI.compose([l.kI.required])],password:[null,l.kI.compose([l.kI.required])]}),this.getAllproducts()}goLogin(){return(0,u.mG)(this,void 0,void 0,function*(){const r=yield this.LoadingController.create({message:"Connexion en cours"});r.present();var t=JSON.stringify({email:this.email,password:this.password});this.redditService.login(t).subscribe(n=>(0,u.mG)(this,void 0,void 0,function*(){console.log(n),setTimeout(()=>{r.dismiss()},1300),console.log(n.token),0!==n[0].role?(this.authService.ifLoggedIn(),(yield this.toastCtrl.create({cssClass:"bg-profile",message:"Connexion r\xe9ussie ",duration:3e3,position:"bottom"})).present(),console.log("------------ROLE ---------"),console.log(n[0].role),this.roleUser=n[0].role,this.localStore.saveItem("iduser",n[0].id),this.localStore.saveItem("role",n[0].role),this.localStore.saveItem("email",this.email),this.localStore.saveItem("password",this.password),this.localStore.saveItem("token",n.token),this.getMenu(),setTimeout(()=>{this.router.navigateByUrl("/home")},2e3)):this.presentAlertError()}),n=>{console.log(n),r.dismiss()})})}goToRegister(){return(0,u.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/register")})}forgotPass(){return(0,u.mG)(this,void 0,void 0,function*(){this.router.navigateByUrl("/forgotpassword")})}presentAlert(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Erreur",subHeader:"",message:"E-mail ou mot de passe incorrect",buttons:[{text:"Ok",cssClass:"primary",handler:t=>{console.log("Confirm Ok: blah")}},{text:"Annuler",cssClass:"secondary",handler:t=>{console.log("Confirm Cancel: blah")}}]})).present()})}presentAlertError(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Erreur",subHeader:"",message:"Identifiant ou mot passe incorrect ",buttons:[{text:"Ok",cssClass:"primary",handler:t=>{console.log("Confirm Ok: blah")}},{text:"Annuler",cssClass:"secondary",handler:t=>{console.log("Confirm Cancel: blah")}}]})).present()})}getMenu(){console.log("------MENU ROLE --------"),console.log(this.roleUser),1==this.roleUser&&this.menu.enable(!0,"menu1"),2==this.roleUser&&this.menu.enable(!0,"menu2"),3==this.roleUser&&this.menu.enable(!0,"menu3")}getAllproducts(){return(0,u.mG)(this,void 0,void 0,function*(){this.page=1,this.table="products",this.per_page=100,this.order_id="id",this.order_by="ASC",this.category="",this.status="",this.filter="",this.redditService.getDataBypage(this.page,this.table,this.per_page,this.order_id,this.order_by,this.category,this.status,this.filter).subscribe(r=>{this.products=r.data})})}}Object.defineProperty(g,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||g)(e.Y36(o.SH),e.Y36(o._q),e.Y36(o.yF),e.Y36(o.Br),e.Y36(o.HT),e.Y36(l.qu),e.Y36(h.I),e.Y36(b.F0),e.Y36(o.Br),e.Y36(v.K),e.Y36(y.$),e.Y36(x.C))}}),Object.defineProperty(g,"\u0275cmp",{enumerable:!0,configurable:!0,writable:!0,value:e.Xpm({type:g,selectors:[["app-login"]],decls:40,vars:13,consts:[["color","secondary"],["slot","start"],["slot","end"],["fill","outline","color","primary",3,"routerLink"],[1,"padding"],["sizeLg","6","sizeMd","6","sizeXs","12",1,"bloc",2,"border","2px","border-width","2px"],[1,"ion-padding-horizontal","ion-text-center",2,"padding-top","5%","padding-bottom","5%"],["src","../assets/icon/logo.png"],[1,"list-form",3,"formGroup"],["position","floating"],["name","mail-outline","item-start",""],["type","email","formControlName","email",3,"ngModel","ngModelChange"],["ion-text","","class","text08",4,"ngIf"],["name","lock-closed-outline","item-start",""],["type","password","formControlName","password",3,"ngModel","ngModelChange"],["ion-text","","color","warning","class","text08",4,"ngIf"],[1,"ion-margin-top","ion-text-right"],[3,"routerLink"],["icon-left","","size","primary","expand","full","shape","round","tappable","",3,"disabled","click"],["icon-left","","size","primary","expand","full","shape","round","tappable","",3,"routerLink"],["sizeLg","6","sizeMd","6","sizeXs","12"],["src","../assets/back1.jpg"],["class","ion-text-wrap",3,"routerLink",4,"ngFor","ngForOf"],["ion-text","",1,"text08"],["color","light"],["ion-text","","color","warning",1,"text08"],[1,"ion-text-wrap",3,"routerLink"],[4,"ngIf"],["color","primary",4,"ngIf"],["color","light","shape","round","color","light",4,"ngIf"],["color","primary"],["color","light","shape","round","color","light"]],template:function(r,t){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._uU(3," 1.1.3 "),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-button",3),e._uU(6," Nouvelle inscription"),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-grid")(9,"ion-row",4)(10,"ion-col",5)(11,"div",6),e._UZ(12,"img",7),e.qZA(),e.TgZ(13,"form",8)(14,"ion-item")(15,"ion-label",9),e._UZ(16,"ion-icon",10),e._uU(17," Email "),e.qZA(),e.TgZ(18,"ion-input",11),e.NdJ("ngModelChange",function(c){return t.email=c}),e.qZA()(),e.YNc(19,_,3,0,"p",12),e.TgZ(20,"ion-item")(21,"ion-label",9),e._UZ(22,"ion-icon",13),e._uU(23," Mot de passe "),e.qZA(),e.TgZ(24,"ion-input",14),e.NdJ("ngModelChange",function(c){return t.password=c}),e.qZA()(),e.YNc(25,w,3,0,"p",15),e.qZA(),e.TgZ(26,"div",16)(27,"a",17)(28,"ion-text")(29,"strong"),e._uU(30," Mot de passe oubli\xe9 "),e.qZA()()()(),e.TgZ(31,"div")(32,"ion-button",18),e.NdJ("click",function(){return t.goLogin()}),e._uU(33," Connexion "),e.qZA()(),e.TgZ(34,"ion-button",19),e._uU(35," Nouvelle inscription ici ! "),e.qZA()(),e.TgZ(36,"ion-col",20),e._UZ(37,"img",21),e.TgZ(38,"ion-list"),e.YNc(39,L,20,11,"ion-item",22),e.qZA()()()()()),2&r&&(e.xp6(5),e.Q6J("routerLink",e.DdM(10,m)),e.xp6(8),e.Q6J("formGroup",t.onLoginForm),e.xp6(5),e.Q6J("ngModel",t.email),e.xp6(1),e.Q6J("ngIf",t.onLoginForm.get("email")),e.xp6(5),e.Q6J("ngModel",t.password),e.xp6(1),e.Q6J("ngIf",t.onLoginForm.get("password")),e.xp6(2),e.Q6J("routerLink",e.DdM(11,j)),e.xp6(5),e.Q6J("disabled",!t.onLoginForm.valid),e.xp6(2),e.Q6J("routerLink",e.DdM(12,m)),e.xp6(5),e.Q6J("ngForOf",t.products))},dependencies:[p.sg,p.O5,l._Y,l.JJ,l.JL,l.sg,l.u,o.yp,o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.Nd,o.yW,o.sr,o.j9,o.YI,o.Fo,b.rH],styles:[".divider-blue[_ngcontent-%COMP%]{height:100px;border-radius:10px;background-color:#00bcd4;padding-top:20px;text-align:center}.bloc[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:5% 10%}ion-item[_ngcontent-%COMP%]{border-radius:10px;box-shadow:1px 1px 1px 2px #d7d7d7}.selectitem[_ngcontent-%COMP%]{--border-top-width: 6px;--border-end-width: 6px;--border-bottom-width: 6px;--border-start-width: 6px;--inner-border-width: 0;--border-width: var(--border-top-width) var(--border-end-width) var(--border-bottom-width) var(--border-start-width);--border-color: rgb(63, 187, 59)}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .roundedInput[_ngcontent-%COMP%]{--border-color: gray;--border-radius: 5px;--border-width: 2px;--box-shadow: 2px gray;--highlight-height: 0;--background: #f8f9fa;padding-right:10px}ion-textarea.custom-textarea[_ngcontent-%COMP%]{--background: #373737;--color: #fff;--padding-end: 10px;--padding-start: 10px;--placeholder-color: #ddd;--placeholder-opacity: .8}"]})});const A=[{path:"",component:g}];class s{}Object.defineProperty(s,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||s)}}),Object.defineProperty(s,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:s})}),Object.defineProperty(s,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[b.Bz.forChild(A),b.Bz]})});class d{}Object.defineProperty(d,"\u0275fac",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return new(r||d)}}),Object.defineProperty(d,"\u0275mod",{enumerable:!0,configurable:!0,writable:!0,value:e.oAB({type:d})}),Object.defineProperty(d,"\u0275inj",{enumerable:!0,configurable:!0,writable:!0,value:e.cJS({imports:[p.ez,l.u5,l.UX,o.Pc,s]})})}}]);